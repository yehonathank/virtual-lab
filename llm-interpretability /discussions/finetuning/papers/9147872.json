{
    "content": [
        "Heterogeneity is a problem in storing and exchanging data in a digital health information system (HIS) following semantic and structural integrity. The existing literature shows different methods to overcome this problem. Fast healthcare interoperable resources (FHIR) as a structural standard may explain other information models, (e.g., personal, physiological, and behavioral data from heterogeneous sources, such as activity sensors, questionnaires, and interviews) with semantic vocabularies, (e.g., Systematized Nomenclature of Medicine\u2014Clinical Terms (SNOMED-CT)) to connect personal health data to an electronic health record (EHR). We design and develop an intuitive health coaching (eCoach) smartphone application to prove the concept. We combine HL7 FHIR and SNOMED-CT vocabularies to exchange personal health data in JavaScript object notion (JSON). This study explores and analyzes our attempt to design and implement a structurally and logically compatible tethered personal health record (PHR) that allows bidirectional communication with an EHR. Our eCoach prototype implements most PHR-S FM functions as an interoperability quality standard. Its end-to-end (E2E) data are protected with a TSD (Services for Sensitive Data) security mechanism. We achieve 0% data loss and 0% unreliable performances during data transfer between PHR and EHR. Furthermore, this experimental study shows the effectiveness of FHIR modular resources toward flexible management of data components in the PHR (eCoach) prototype.",
        "As defined by the National Health IT Coordinator, personal and/or person-generated health data (PGHD) are created, and recorded by individuals, family members, or caregivers either passively or continuously to create an accurate and comprehensive picture of health and health plans, (e.g., decision support, recommendation generation, diagnostics, treatment plan). Individuals cannot directly access their health data stored inside EHR. The primary stakeholders are participants or patients interested in acquiring their data to monitor chronic illness or track fitness levels and engage more in their health wellness evaluation. They consent to process or share their personal health information with actual providers. PGHD is maintained and processed by primary healthcare professionals and researchers on the provider side. PGHD includes health history, biometric data, symptoms, medication effects, physiological data, behavioral data, (e.g., sleep, diet, habit, work, and exercise), lifestyle choices, patient-reported outcome measures, and treatment history. The sources of PGHD can be mobile applications, wearable devices, registered medical grade devices, interviews, surveys, questionnaires, or any other interactions with technology that produce personal data about health. PGHD is the key to improving health outcomes, care delivery, and patients\u2019 lives, and therefore should be part of any evidence generation strategy. The U.S. Food and Drug Administration (FDA) recognizes the vital role of these data, identifies PGHD as one of the primary sources of real-world data, and recommends creating real-world evidence for critical analyses of randomized trials and observational studies using PGHD. PGHD has been essential to provide deeper insights for developing new medical products and providing more human-centered care.",
        "According to the Markel Foundation, the PHR is, \u201can electronic application through which individuals can access, manage, and share their health information, and that of others for whom they are authorized, in a private, secure, and confidential environment\u201d. Electronic medical record (EMR) is generally regarded as an internal organizational system, while EHR is defined as a cross-organizational system. An EMR\u2013tethered PHR system can engage patients more actively in managing their chronic conditions with lifelog data. HL7 PHR-S FM is a set of features and functions needed for PHR. HL7 PHR-S FM is neither a PHR data model nor an implementation but a framework that lists the required or desired tasks in the PHR. Experts can use PHR-S FM as a frame of reference to design and implement PHR. The PHR types can be divided into the following three categories: individual (a separate or standalone application that acts as a digital journal, such as MyMedical, Microsoft HealthVault that collects personal health data; however, does not communicate with EHR), tethered (a PHR is connected to a single EHR and the EHR data is harmonized with PHR based on the consented permission), and integrated (a PHR is synchronized with multiple sources, such as home diagnostics, EHRs, pharmacy, and insurance systems). According to the experts and researchers, tethered PHR provides greater effectiveness than individual PHR, and the evidence has been collected from the unsuccessful Google Health project.",
        "Semantic and structural interoperability is designed to share electronic health data across all departments of an organization, clinicians, nurses, laboratories, and the entire hospital. A semantically and structurally integrated healthcare system enables data to be communicated between organizations and their internal ecosystems without losing the meaning of domain concepts, contextual knowledge, and formal data representations. Therefore, semantic, and structural interoperability avoid data silos and keep data providers independent for exchanging information across organizational boundaries. However, finding semantic and structural interoperability in health records and disparate clinical annotations is one of the biggest challenges and a constant research goal in recent years. Structural and semantic integration is the ability of two or more systems or components, (e.g., PHR, EHRs) to exchange information and consistently represent them in a uniform way. A semantic integration between a PHR and EHRs allows stakeholders to describe requirements regardless of technical implementation. A semantic and structural integration following a guideline in the bi-directional communication between EHR and PHR has brought the attention of interdisciplinary researchers. Hussein et al. emphasized the vital role of interoperability in developing and adopting a fully functional PGHD-enhanced health ecosystem to exchange unified data among patients or participants, healthcare providers, and researchers. Through its DH-Convener project, they supported PGHD interoperability and security with an eye toward the associated clinical-technical user aspects. Plastiras et al. developed a middleware framework for facilitating PHR and EHR interoperability based on ontologies. Rohrs et al. proposed an application model to ease integration issues caused by the lack of interoperability between different standards to provide a single updated point-of-view PHR. According to Urbauer et al., interoperability specifications of standard-based communication of systems and personal health devices have contradictions and gaps that could be resolved. Likewise, organizations proposed different standards to make interoperability easier, and some prominent means have been translated into unified modeling language (UML) to facilitate model-driven healthcare application development. As a result of SMART on FHIR specification, Sayeed et al. created SMART Markers, a mobile device software framework that can be used to deploy both patient-facing and practitioner-facing apps for PGHD. Their approach creates context-specific experiences that support the integration of health systems for both patients and practitioners. HL7 FHIR serves as the single data model in FHIR as an application programming interface (API).",
        "HL7 FHIR offers a modular approach to healthcare data representation instead of the traditionally document-centric approach as autonomous substances called resources. The HL7 FHIR standard is planned to utilize existing HL7 standard/model(s) and major innovative redesign using the current web and versatile advancements, such as the lightweight HTTP-based REST (representational state transfer) convention, JavaScript object notion (JSON), extensible markup language (XML), and resource description framework (RDF). The HL7 Version 2 (V2) Messaging standard 7 supports granular information payloads and benefits many organizations. FHIR is neither a security convention nor characterizes any security-related functionalities. Therefore, data exchange through HL7 FHIR API must be protected from external vulnerabilities.",
        "A proof-of-concept (PoC) implements a method or idea to demonstrate its feasibility or a proof-of-principle to test whether a concept or theory has actual potential. The scope of a PoC can be limited; however, it focuses on the targeted population. This study has focused on integrating an information model and clinical terms to establish a structural and semantic consistency between the PHR (the eCoach mobile app) and the EHR (a database inside TSD) following a standard guideline, (e.g., PHR-S FM). Here, PGHDs have been collected with the PHR (an eCoach mobile app) and recorded into the EHR (a TSD database or PostgreSQL). HAPI FHIR server has been operative between the PHR and the EHR to provide a structural and semantic consistency of bi-directional communication. TSD\u2019s authentication and authorization method have secured the entire communication channel. This study addresses the following research questions: ",
        " (RQ-1)\u00a0How to connect personal health data to an EHR using structural and semantic interpretation? ",
        " (RQ-2) How to verify that the tethered PHR implementation has followed PHR-S FM functional standards? ",
        " (RQ-3) How to verify that there are no data loss and performance drops during the data transfer between PHR and EHR across different devices, such as smartphones, and desktop web? ",
        "We have used HL7 FHIR, SNOMED-CT, PHR-S FM, and TSD (as Infrastructure as a Service or IaaS) to design and develop a tethered eCoach PHR application to address the research questions. TSD helps to achieve Microservice API (application programming interface) security during the external data exchange. ",
        "This section presents existing knowledge applicable to current research. We performed a literature search with the following search string pattern: (personal health data OR patient health data OR patient-generated health data OR person-generated health data) AND (personal health record OR patient health record OR PHR) AND (electronic health record or EHR) AND (HL7 OR FHIR OR HAPI FHIR OR CCR OR CCD OR CDA) AND (SNOMED-CT or SNOMED CT OR LOINC) AND (Integration OR Interoperability) on the following electronic databases\u2014Scopus, EBSCOhost, IEEE Xplore, Nature, Science Direct, PubMed, IEEE, Google Scholar, and SpringerLink. A subset of these articles is cross-referenced between portals, especially Google Scholar and PubMed. Related search keywords were identified using terms of MeSH (Medical Subject Headings), synonyms, relevant articles, and self-determined search terms. We used EndNote (V. X9), DOAJ, Sherpa/Romeo, and Microsoft Excel (MS Office 365 V. 16.x) to efficiently search, collect, and select related articles. We included articles based on the following inclusion criteria: (1) peer-reviewed, full-length articles written in English, and (2) articles published in the selected databases between 2014 and 2021. We excluded studies related to EHR interoperability, core ontology-based semantic searching or search engines, and artificial intelligence-based text processing for the latent semantic analysis. Therefore, the search resulted in peer-reviewed, full-length articles on PHR architectures, models, and systems/implementations with or without semantic standards.",
        "Hommeaux et al. developed a Java-based FHIR resource description framework (RDF) for PHR data transformation and validation. RDF is a standardized HL7 FHIR data format. Furthermore, they created a verification framework based on RDF Shape Expressions (ShEx) to verify FHIR RDF data. The framework conformed to the ShEx model provided in the FHIR specification of FHIR versions R4 and R5. Gulden et al. investigated how the HL7 FHIR can be used as a standard format for exchanging and storing clinical trial records. The results showed that FHIR resources established a unified view of research information from heterogeneous sources by realizing automatic data exchange between the test center and the central research registry. Mandl et al. described the specification of the SMART/HL7 FHIR bulk data access API, which established access to patient-level data for the entire patient population and supported countless use cases across healthcare, research, and public health ecosystems. The API supported \u201cbutton-type population health\u201d as the core data elements can be quickly and standardly extracted from electronic health records, enabling local, regional, and national data-driven innovation. Kiourtis et al. proposed a mechanism to aggregate the semantic and syntactic similarity in healthcare data and transform it into corresponding HL7 FHIR architecture to promise healthcare interoperability. They further verified the quality of the proposed mechanism with aligned APIs and a non-dominated sorting genetic algorithm (NSGA-III) to achieve ontology alignment. Hussain et al. described the advantage of HL7 protocols for annotating SIIM image Hackathon Dataset as a PoC study using the HAPI FHIR server to achieve interoperability. They demonstrated the FHIR server compilation and installation prerequisites in the Apache Tomcat web server and SIIM medical image data loading through HAPI REST API. Plastiras et al. developed a standardized information model based on HL7 standards for interoperability to support PGHD and observations of daily living (ODL) data types. The extended data models utilized HL7 Clinical Document Architecture (CDA) to address information and instantiated as a Prot\u00e9g\u00e9 ontology to exchange information among PGHD systems to encourage patient self-management. Kyazze et al. developed a ubiquitous PHR on top of Microsoft HealthVault, accessible via mobile or web, to enable first-time patients to communicate their healthcare data recorded using the PHR to the providers. Bloomfield et al. and Mandel et al. implemented Substitutable Medical Apps and Reusable Technologies (SMART) on HL7 FHIR compatible server infrastructure to enable a successful integration between consistent providers and patient-facing medical apps. ",
        "Gruendner et al. developed a preprocessor to use standard open-source tools, including PostgreSQL (PSQL), to store FHIR data in a format that can generate further filtering and grouping, and feature selection mechanisms. Verma et al. summarized the impact, opportunities, and challenges associated with the Open-source record Medical Record System (OpenMRS) as a global good. OpenMRS has been implemented in 62 countries worldwide since 2004 for quality healthcare delivery, improved healthcare processes, better reporting and decision making, improved data availability, and enhanced interoperability. Zong et al. proposed an FHIR-based framework based on a case study with colorectal cancer data to model clinical case report form (CRF) data for clinical trials and downstream applications. Pfaff et al. developed an open-source Clinical Asset Mapping Program (CAMP) for FHIR (CAMP FHIR) to efficiently transform and store clinical data into Common Data Model (CDM) to support source-agnostic CDM-to-FHIR-mapping. Saripalle et al. explored HL7 FHIR to design and prototype an interoperable mobile PHR that conforms to the HL7 PHR functional model and allows two-way communication with OpenEMR. Li et al. used HL7 CDA, an XML-based document standard with a steep learning curve and complex architecture, and designing an HL7 CDA configuration file is not a simple process. Compared with FHIR, there is little support for HL7 CDA and its message format. Any available tools/libraries (such as OpenHealthTools MHDT, Everest Framework, etc.), may not be well documented and maintained. Rohers et al. developed OmniPHR, a distributed fastened PHR utilizing openEHR, distributed ledger technology, and other administration ideas that permit patients to keep up with their wellbeing history in a holistic view from any gadgets in a ubiquitous manner. Cer\u00f3n et al. designed and implemented a PHR system using the Indivo model to monitor blood glucose monitoring in diabetes mellitus type 2 patients. The Indivo architecture is document-centric, with a document model adapted for information needed by patient-centric applications. The document data model is open and available as part of the Indivo open-source suite. The application can also handle information on Continuity of Care Record (CCR) and Continuity of Care Document (CCD).",
        "Lee et al. developed a blockchain-based architecture to ensure PHR security, integrity, confidentiality, availability, and secure international, cross-institutional, and internal exchange of health records using HL7 FHIR international standards as data format. Margheri et al. designed and implemented a blockchain-based secure decentralized platform for tracking and exchanging patients\u2019 health records following the patient-informed consent preferences and the latest healthcare standards. To achieve interoperability, they integrated the standards, such as HL7, FHIR, and Integrating the Healthcare Enterprise (IHE). They combined their decentralized platform with the SpiritEHR engine of the enterprise-level healthcare system and stored and retrieved available documents in the CDA repository. Hylock et al. formulated a patient-centered mixed blockchain framework to increase patient engagement, data curation, data privacy and confidentiality, and secure data exchange with HL7 FHIR resources. ",
        "Odigie et al. developed a clinical system to represent imaging-related clinical evidence logic statements (CELTS) using semantic standards, such as SNOMED CT, FHIR, and clinical quality language (CQL) to adopt the promotion and acceleration of evidence-based practice. Zhang et al. performed a semantic integration of clinical laboratory tests from PHRs using LOINC codes for deep phenotyping and biomarker discovery. They transmitted the encoded data in FHIR standards after mapping the LOINC encoded data into Human Phenotype Ontology (HPO) terms. Hawig et al. designed a distributed ledger technology (DLT) system with public IOTA (a directed acyclic graph-based DLT) and a private interplanetary file system (IPFS) cluster for the exchange of glucose data following the FHIR semantic standards and GDPR. Tao et al. introduced a bespoke system\u2014Epilepsy Tracking and optimized Management engine (EpiToMe) using HL7 (v2.3) messaging exchange engine to ease the burden of care management in epilepsy by optimizing patient care documentation and clinical workflow.",
        "Security and data privacy are crucial in exchanging data between different healthcare applications; however, they are missing in many studies. Most PHRs use complex document-centric standards, such as CCD, CDA, and ASTM CCR, to exchange data among heterogeneous healthcare systems and applications to promise interoperability. However, HL7 FHIR is new, flexible, easy to use, and based on the web-based technology interoperability standard. This study focuses on designing and implementing a secure tethered PHR to connect personal health data to an EHR, following the norms and functional requirements. Further studies related to PHR have focused on the following PHR types: standalone, tethered, and integrated (see Table 1). ",
        "To implement a tethered PHR following the PHR-S FM functional requirement, we have addressed interoperability with HL7 FHIR and SNOMED-CT vocabularies. Moreover, we have used TSD-based authentication and authorization mechanism to secure the PHR. As a standard in PHR design and development, PHR-S FM functional requirement is missing in the existing literature except in the study conducted by Saripalle et al. (see Table 1). However, our analysis incorporates some extended functionalities as specified in the Method section. Different studies are performed on various platforms, and they did not address the implementation on a detailed level. Thus, a quantified comparison between our research and the existing research has been challenging. However, a qualitative comparison between our work and the relevant previous works is shown in Table 1 and discussed in the Discussion Section. In qualitative comparison, the key parameters are integration standards, security and authentication, data privacy, and PHR type.",
        "A high-level description of PHR-S FM, HL7 FHIR, HAPI FHIR JAVA RESTful API, clinical vocabularies, and TSD has been captured in Appendix A. A subset of standard functional components in PHR-S FM for this study has been described in Table 2 to maintain the quality of interoperability and PHR implementation standards. In general, many PHR design and development does not directly conform to PHR-S FM; however, they should conform to the PHR-S FM standard for a well-defined functional profile, and the same has been addressed in this study.",
        "This section gives a detailed analysis and explanation of a tethered PHR mobile application, (e.g., the health eCoach system) design and its implementation. We have used HL7 FHIR, HAPI library, SNOMED-CT, and PostgreSQL to ensure a bi-directional communication between the eCoach mobile app and PostgreSQL and used API security methods to protect HAPI REST APIs. For the overall design and development, we adopted the established iterative approach. ",
        "In our solution approach, we first define the scope of the solution, (e.g., modular design pattern following an object-oriented architecture, protocols, ethical approvals, and data types). Second, we elaborate on our adopted structural and semantic interoperability methods, (e.g., HL7 FHIR, SNOMED-CT). Third, we discuss interoperability quality standards to design and develop our tethered mobile PHR, (e.g., PHR-S FM). Forth, we describe a system architecture where we have deployed PHR services, HL7 FHIR server, and set up the EHR. Finally, we discuss semantic and structural interoperability verification methods for our tethered PHR solution. The overall steps to answer the identified research questions are summarized in Box 1. ",
        "(Step-1) Enable PGHD\u00a0recording and management through eCoach mobile app.",
        "(Step-2) Set up a HAPI FHIR server inside the TSD system to store and access the clinical information.",
        "(Step-3) Create a web-based application to define HL7 FHIR profiles for our eCoach prototype system.",
        "(Step-4) Implement the RESTful HAPI FHIR server profiles where clinical data is stored as FHIR resources.",
        "(Step-5) Create necessary services to support the HAPI FHIR server, enable data and endpoint security, and ",
        "(Step-6) Enable structural and semantic interoperability across diverse devices (or systems) as FHIR resources with SNOMED-CT integration (in JSON format).",
        "An eCoach system is a multifaceted non-linear system. It consists of loosely coupled electronic components that interact across various feedback loops. A health eCoach system may help to generate automatic and personalized or community-based recommendations based on the insights from personal health and wellness data to achieve healthy lifestyle goals. Our designed and implemented eCoach system has the following modules\u2014a. data collection module, b. security module for REST API authentication and authorization, c. annotation module for data semantization, d. health state monitoring module to analyze the behavioral pattern over time, e. personalized recommendation generation, and f. the recommendation presentation in the eCoach mobile app with a user-centered design (UCD) approach. However, this study focuses on the first three modules. The data collection module (see Figure 1) is responsible for collecting an identified list of personal and person-generated health and wellness data over time, as described in Table 3. The participants must authenticate and authorize themselves to upload their data to the secure TSD system through the eCoach mobile app.",
        "In TSD, data are stored in PostgreSQL as FHIR resources. The data are protected from personal identity disclosure as no individual or national level identifiers are planned to collect from participants following the ethical approval by the Norwegian Centre for Research Data (NSD) guidelines. The data semantization module converts data into a structured JSON format using HL7 FHIR resources and SNOMED-CT vocabularies before storing them in the TSD database. Data processing for demographic statistics, health risk prediction, and decision-making for personalized recommendation generation for healthy lifestyle management are beyond the scope of this study. The visualization of the interface presentation can be further improved using an iterative UCD approach with a dialogue-lab method.",
        "According to the Academic Committee for health and architecture in Norway (NUFA), the standards and regulations that have been developed for the Norwegian healthcare system are\u2014OpenEHR, HL7 V3.0 messaging, HL7 CDA R2, IHE XDS.b, Link Data, and HL7 FHIR. The PHR must achieve structural interoperability to seamlessly communicate healthcare data within the PHR and between the PHR and other external resources (such as EHR). ",
        "The main reasons for using HL7 FHIR are\u2014a. FHIR supports the best features of HL7 V2.0, V3.0, and CDA, b. HL7 FHIR does not require any specific language, c. FHIR supports the latest web standards (RESTful architecture) for the developers and implementors, d. FHIR supports both JSON and XML value-set, e. support for RESTful protocol with API-style programming to manage and exchange FHIR resources, f. FHIR supports both international, (e.g., LOINC, SNOMED CT) and a system specified observation codes to formulate \u201cObservation\u201d resource-type, and g. FHIR supports different models of interaction, such as message exchange, document sharing, and text exchange. FHIR terminology module consists of the following resource types: naming system, code system, value sets, elements or coded data types, concept map, and element definition. In this study, we have used SNOMED CT ( (accessed on 10 March 2022)) and its concept details to represent FHIR terminology-related structures and their relationships.",
        "According to the IN.2 of the PHR-S FM framework, a PHR system must support standards-based interoperability for seamless sharing of information between PHRs and other internal or external systems. The same has been addressed in this study. HL7 FHIR stands out as one of the best candidates among HL7 FHIR, ASTM CCR, ISO 13606, HL7 CDA, and CCD to achieve structural interoperability in PHR on the review results of the latest norms, standards, and recommendations. PHRs are more focused on atomic health data objects, such as pulse, blood glucose, lipid profile, and BMI, rather than implementing standards for clinical documents with healthcare data in document-centric approaches. The document-centric policy deals with documents, such as reports, individual records, hospital information, insurance data, and their exchange in XML format between diverse systems, appropriate for EHRs. HL7 FHIR resource profiling improves the data quality and helps experts manage an atomic data entity or a group of data entities or records, (e.g., PHR). Such features of HL7 FHIR make it suitable to design and implement interoperable PHRs compared to the current standards.",
        "Furthermore, the atomic part of HL7 FHIR supports the reusability of data elements. A PHR can target a specific group of individuals, (e.g., only adults) and specify data elements in design and implementation. HL7 FHIR has various resource types that help experts build a generic and PHR-centered profile to assign a meaningful value consisting of semantic vocabularies, such as LOINC and SNOMED-CT, (e.g., vital-sign body weight has a unique SNOMED code 27113001 under Observation resource). The value-set is JSON used in this study to represent the following example FHIR resource types: AllergyIntolerance, Appointment, AppointmentResponse, Observation, Person, Questionnaire, and RiskAssessment (see Appendix G). We collected personal allergy data during the participant\u2019s recruitment (interviewing) as baseline data. Trained health professionals, (e.g., nurses) scheduled an appointment for participant screening and assessing participant\u2019s health condition during recruitment and monthly routine check-up to collect physiological data. Daily activity levels were observed using a Bluetooth-enabled activity tracker (e.g., MOX2-5 activity sensor). As a self-reported questionnaire, nutrition and habit information were collected daily, on alternative days, and weekly. ",
        "The Information Infrastructure (IN) function IN 1.8 of the PHR-S FM framework states that the PHR requires a standard semantic vocabulary or terminology to ensure data consistency and correctness and facilitate data interoperability. Moreover, individuals should have the ability to record and manage their data in PHR (PH.3.1.1), and the data can be both structured and unstructured from heterogeneous sources. Our study uses SNOMED-CT vocabularies to enable semantic interoperability in our PHR design and implementation. SNOMEDs are used as a standard to encode EHR data and capture clinical information. SNOMED-CT has 311,000 concepts, representing 1.3 million relationships between them. A unique conceptual ID identifies them (SCTID) with a unique human-readable, fully specified name. The semantic interpretation of PGHD (see Table 3) has been described in Appendix B with SCTID.",
        "The architecture, design, and implementation of the eCoach prototype application are based on the functional requirements specified by the PHR-S FM and primarily focus on the semantic and structural integration to manage data in a meaningful way. The focus of this study excluded detailed implementation and analysis of security and privacy, as we have used an established TSD system for API security and data privacy. Additional functions from this study are administration, insurance, medication, and finance. Our focus is to implement a PHR using HL7 FHIR; the designed and implemented eCoach app is compatible with the PHR-S FM rather than a general functional profile. To demonstrate the capabilities and usability of HL7 FHIR, keeping Personal Health management in focus, the selected functions from PHR-S FM, at a detail level, are specified in Box 2.",
        "Identify and Maintain a PHR Account Holder (PH.1.1)",
        "Manage PHR Account Holder Demographics (PH.1.2)",
        "Manage PHR Account Holder Originated Data (PH.2.1)",
        "Manage Problem Lists (PH.2.5.1), (e.g., chronic conditions)",
        "Manage Allergy, Intolerance, and Advance Reaction List (PH.2.5.4),\u00a0(e.g., known list of allergies, irritations)",
        "Manage Test Results (PH.2.5.3), (e.g., monitoring)",
        "Manage Medical History (PH.2.5.6), (e.g., chronic conditions\u00a0in a year)",
        "Manage Social History (PH.2.5.10), (e.g., education. Employment)",
        "Manage Historical and Current State Data (PH.2.5)",
        "Manage Personal Observations and Care (PH.3.1.1)",
        "Entity Access Control (IN.3.3)",
        "Manage Self-Assessment (PH.6.2)",
        "Manage Interoperability of PHR Account Holder Demographics\u00a0(S.3.1)",
        "The architecture consists of two parts: client and server (see the architectural view in Figure 2). The client part consists of mobile PHR, web PHR, and individual (participants, health professionals, and researchers) dashboard. The server includes the eCoach prototype, HL7 FHIR handler and server, PostgreSQL database (EHR), and SNOMED-CT vocabularies hosted inside TSD-based digital infrastructure. The client communicates with the server following the TSD-based authentication and authorization method. All the PGHDs are collected from different sources (activity sensors, questionnaires, and interviewing) through mobile PHR at the client-side and then sent the collected data to the server-side in the JSON format for semantic vocabulary mapping (HL7 FHIR + SNOMED-CT) before getting stored into the PostgreSQL database. Individuals can visualize and update their PGHD through the eCoach system\u2019s PHR menu (see Figure 3), supporting the FHR-S FM functionality PH.1.2, PH.2.1, and PH.2.5. The eCoach application code manages all the logic related to user validation and annotation of incoming JSON into FHIR resource type using SNOMED-CT semantic vocabulary services and sending the JSON to HAPI RESTful service endpoints for data persistence. The FHIR resources are exchanged (in and out) in JSON format. The architecture adopts a modular approach and relies on REST APIs to interact with external components. Therefore, it supports both the mobile and web-based PHRs.",
        "We have developed a digital infrastructure after extending the TSD features with UiA virtual private network (VPN), firewall, and secure socket layer or SSL (HTTPS). The TSD infrastructure supported data capturing from eCoach mobile PHR, stored data in PostgreSQL (or EHR), secured legitimate users\u2019 access, and protected data in the EHR. We have deployed our eCoach prototype system and HAPI FHIR services in the developed infrastructure to execute a formal interoperability testing of tethered PHR solution. TSD uses the Thinlinc remote access protocol based on HTML5 and applies Nginx proxy for two-factor authentication. Thinlinc is a remote desktop framework that supports HTML5 to connect to their Linux machines using a browser instead of a VNC client. Thinlinc utilizes TigerVNC and provides additional user and agent VM management layers, allowing project user groups to be automatically assigned to Thinlinc agents installed on Linux VMs. The Thinlinc infrastructure is composed of Thinlinc agents and Thinlinc masters. The proxy runs Nginx and a custom login protocol. The Thinlinc main server redirects the user after being authenticated through the proxy. The host acts as a proxy, tracking all Thinlinc proxy machines and redirecting users to the correct proxy machine. The user needs to perform an additional login on the actual project VM. Each service deployed inside the TSD platform, (e.g., /v1/<<project number-P1075>>/fhir) is associated with a unique long-term API key ({\u201capi_key\u201d = <key>}). The key is valid for one year and expires automatically. The system administrator orders a new key using the client_id and password (superuser) specific to the application (such as eCoach). The key is just a JWT token to be decoded for verification. The API key is used as a bearer token in the HTTP request header to generate a short-term access token (valid for 30 days) so that the TSD API can authenticate the deployed application. If someone abuses the API, the long-standing API token will be revoked.",
        "Interoperability in the healthcare system can be classified as follows: device interoperability, network interoperability, structural interoperability, semantic interoperability, and platform interoperability. However, we have focused only on structural and semantic interoperability in this study. For structural interoperability, we have used HL7 FHIR for a uniform representation of PGHDs in JSON format based on different FHIR resource profiles (see Appendix G). We have used semantic vocabularies and SCTIDs of SNOMED-CT medical ontology for semantic interoperability in the FHIR resource profiles (see Appendix B). Furthermore, to establish semantic interoperability, we integrated data from different simulated external sources in the form of a smartphone, desktop, and tablets. PHR data captured through the app has been merged with the data in the EHR to support semantic interoperability. The holistic idea is to accomplish semantic and structural interoperability or integration in a tethered PHR mobile application following a standard guideline and functionalities, (e.g., PHR-S FM) as a quality standard. ",
        "This study has shown a direction to achieve semantic and structural interoperability with HL7 FHIR and SNOMED-CT in bi-directional communication in a tethered PHR application as a PoC study. Therefore, the interoperability verification metrics used for this study, (e.g., PHR-S FM functionalities, HR7 FHIR resource profiling, SNOMED codes) are different from traditional network or device, or platform interoperability verification processes. We have validated metrics such as data loss and unreliable performance during the record fetching from the TSD database or EHR using HL7 FHIR RESTful microservices (HTTP GET) for devices and smartphone apps, and desktop web. To measure the data loss and unreliable performance, we have used Apache open-source software JMeter (V 5.4.1) to generate HTTP requests and capture the outcomes. We set the cycle count value of 5 and took the average data loss and unreliable performance probabilities. The specification of the two devices involved in testing is described in Table 4.",
        "The metric for data loss has been calculated as follows:",
        "The probability of the unreliable performances has been calculated as follows:",
        "In this study, we describe the eCoach prototype implementation process and the results associated with the interoperability verifications. We developed the eCoach prototype with Java Programming Language following the Object-Oriented Analysis and Design. Appendix C mentions all the used software and corresponding versions for the eCoach prototype implementation. The HAPI-FHIR module has been deployed between the eCoach application. The TSD database stores the Java-based HL7 FHIR resources, extensions, and HAPI core library profiles (see Figure 2). For the interoperability verification, we first performed integration testing between PHR (eCoach app and eCoach web), HAPI FHIR, and EHR (TSD database) at the test server, following the steps mentioned in Appendix D. Then, we deployed the eCoach and HAPI-FHIR services in the developed TSD infrastructure, following the steps mentioned in Appendix E. TSD uses PostgreSQL as its central database server; it has been used as an EHR to store PGHDs. The codes for accessing HAPI FHIR resources in the TSD infrastructure following the authentication and authorization process are described in Appendix F. ",
        "Our PHR (or eCoach) mobile app collects PGHDs from heterogenous sources and stores them as HL7 FHIR resources in the EHR (or the TSD database) with SNOMED-CT semantic vocabularies in JSON format. The stored resources can be fetched through the HTTP GET method through HAPI FHIR REST endpoints in JSON format. Individuals with PHR mobile app can record and manage their data following the TSD security process. TSD conforms to GDPR and NORMEN guidelines to enable health data security, lawful basis, data transparency, data privacy rights, accountability, and data governance. The data synchronization process between PHR and EHR is depicted in Figure 4 as a sequence diagram.",
        "The landing view of the PHR mobile app (see Figure 3) represents a floating menu at the bottom of the application with the following options\u2014activity tracking (activity data), person (personal data with preferences for personal goal management), appointment (participant\u2019s appointment information with health professionals at the time of initial recruitment and followed by, periodic health assessment), questionnaire (self-reported behavioral data), allergies (food allergy information), and risk assessment (health risk prediction for personalized recommendation generation). The menu options represent a high-level functional overview of the FHIR resource types. The observation interface records observation data in SNOMED-CT terms using the corresponding SCTID. Participants have the flexibility to add more observational data (in context) for a respective date using the \u201cAdd Observation\u201d button. For example, they can add the \u201ctype of activity\u201d they have performed, (e.g., swimming, cycling). All data are stored in the database as an FHIR resource with SNOMED-CT vocabularies (see Appendix B). ",
        "Figure 5 depicts the Mobile PHR view of participants\u2019 observational and allergic data in a human-understandable format as an example of supporting the FHR-S FM functionality (PH.2.5). The PHR mobile app has the flexibility to update FHIR resources and process them for personalized health risk assessment. Accurate prediction of health risks may help successful recommendation generation manage personal goals. The individual dashboard enables authorized access to the personalized behavioral monitoring dashboard. The actual JSON structure of the relevant FHIR resources is represented in the Appendix G, following the semantic and structural rules. In Table 5, we have explained our achieved PHR-S FM functionalities, and Table 6 describes the addressed challenges in the implementation of the eCoach prototype as a tethered PHR following the PHR-S FW framework as a standard.",
        "To test the Loss% and the probability of unreliable performances (P) during the record fetching from the TSD database, we selected two HL7 FHIR REST services (HTTP GET) with approximately 363 and 2025 bytes of request bodies, 63.02 and 452.5 Kilobytes of the response bodies, and response times of 190 and 480 milliseconds, respectively, using JMeter. With JMeter \u201cThread Group\u201d feature, we executed five requests/seconds with an acceptable delay of 200 milliseconds. We then took the average value of Loss% and P. In every pass, we obtained n1 = 0 and n2 = 0, with an error% = 0 for both the request bodies. We repeated the same experiment for a smartphone app and a desktop web and obtained similar results. ",
        "The overall interoperability verification results for this study are summarized as follows\u2014a. devices, (e.g., smartphones, desktop PC) are successfully connected with the eCoach REST endpoints, b. data transfer has been successful between the devices and the eCoach system without any data loss and unreliable performances, c. implementation for semantic representation of PGHD has been successful with SNOMED-CT in JSON format, d. the implementation of data parsing, data transfer, and data visualization algorithms are working correctly, e. handling and representation of data are correct across multiple devices, f. the structural interoperability and semantic interoperability in this PHR (or eCoach system) design and implementation have conformed to the PHR-S FM functional requirements, g. the overall E2E communication between eCoach app and PostgreSQL is secured using TSD system and it follows the PHR-S FM functional requirements, and h. successful resource profiling with HL7 FHIR. ",
        "This study has presented the design and implementation to achieve structural and semantic interoperability in a tethered PHR following a standard guideline specified in the PHR-S FM framework and the same is missing or not reported in the existing studies. The main objective of our mobile PHR (eCoach system) is health data management, self-monitoring, and goal management based on personalized recommendation generation to promote a healthy lifestyle. As described in the Results Section, our eCoach prototype has implemented most of the PHR-S FM functions. We successfully achieved structural interoperability and enhanced data quality with HL7 FHIR resource profiling and semantic interoperability with SNOMED-CT medical vocabularies. The adopted architecture also supports design flexibility with a modular design pattern. ",
        "The achievements of this study are summarized as\u2014a. Interoperability: the presented work leverages HL7 FHIR to achieve structural and semantic interoperability in collaboration with SNOMED-CT to record and manage data using FHIR resources in the eCoaching context. PHR data captured through the app has been merged correctly with the data in the EHR, b. Flexibility: the presented work uses HL7 resource profiling to collect and share PGHDs. The FHIR resource profiling has improved data quality and correctness with meta-data presentation with web-based technologies. Previous standards, such as ASTM CCR, IEEE 11073, HL7 CDA, have either no support for the profile concept or lack tools or documentation to define them efficiently, c. Easy to manage: here, we have used JSON meta-data to exchange data between PHR and EHR. All studies except Saripalle et al. used a document-centered approach to design the PHR. OpenEHR has similar resources to FHIR; however, it supports Archetype Definition Language (ADL), which is more complex than FHIR-supported UML and JSON, d. Standards: previous research developed PHR applications without using an established and mature standard. However, this research supports HL7 FHIR, SNOMED-CT, and PHR-S FM to achieve interoperability successfully. Furthermore, this study overcomes the limitations associated with the Indivo model to design and develop PHR, e. Lightweight protocols: the HL7 FHIR supports REST APIs and JSON data format to establish the PHR communication with EHR or other sources. REST protocols are lightweight and worldwide accepted standards for data communication over the web. Moreover, JSON parsing is faster than XML parsing, f. Data integration: to establish semantic interoperability, we performed successful integration of data from different external sources, and g. Security: to establish the interoperability between the PHR and EHR, we verified that data entered from the PHR can be integrated into the EHR, and the data from the EHR can be utilized by the PHR in an effective way, and i. the presented work achieves data security, API security, and privacy using the TSD-based authentication and authorization mechanism. Data security and privacy are lacking in most of the previous studies except for studies conducted by Lee et al., Margheri et al., Hawig et al., Hylock et al., Rohers et al., Mandel et al., and Kyazze et al.",
        "In this study, we have consolidated the implementations of PHRs in the research articles and excluded the execution and performance of commercially available PHRs on the internet. We have accomplished a high-level functional comparison of different PHR implementations; instead, a detailed level analysis of which functions are the best. Each PHR has been developed for respective patient populations with specific datasets. Therefore, a generalized functionality is complicated to form. ",
        "The presented prototype does not address functionalities (of PHR-S FM) related to insurance information, medication management, messaging, lab reports, test results, medication lists, and advanced data sharing. We wish to overcome such limitations in the current design and development of PHR in our future studies. We have used HAPI FHIR RESTful microservices, an open-source FHIR API for Java. It might create a problem in legacy systems or enterprise servers where only C#.NET. is supported. A detailed usability study is essential for the developed eCoach prototype as an FHIR mobile application to evaluate the acceptance or credibility of end-users. We will perform a qualitative and quantitative performance evaluation to perform a real-world validation in our future studies. This study has only focused on syntactic or structural and semantic interoperability and excluded other interoperability verification studies, such as network, device, or platform. In our future studies, we will address them. However, even with enumerated limitations, this study will be helpful for the healthcare research community to achieve structural and semantic interoperability in PHRs.",
        "This study has elaborated the design and development of structural and semantic interoperability in a tethered PHR with HL7 FHIR resources combined with SNOMED-CT vocabularies. Then, we introduce the concept of using PHR-S FM standard guidelines to design and implement a PHR mobile application. The data captured in PHR is constructed as FHIR resources and shared with EHR in JSON format using Restful API services. Furthermore, the TSD system protected the PHR from illegitimate access. This study explains the unique perspective and architecture outline for implementing an interoperable PHR using modern healthcare standards that expose health data as services using APIs and RESTful protocols. Moreover, this study describes HAPI FHIR Services integration with a health monitoring and recommendation generation system, (e.g., health eCoach prototype system) to achieve semantic representation, record, manage, and exchange PGHDs following the international standards, (e.g., HL7 FHIR, SNOMED-CT)."
    ],
    "title": "HL7 FHIR with SNOMED-CT to Achieve Semantic and Structural Interoperability in Personal Health Data: A Proof-of-Concept Study"
}